<!DOCTYPE html>
<html>
<head>
  <title>Scraper</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<h1>Jumia Scraper</h1>
	<div class="input-div">
		<input type="text" id="input" placeholder="Enter Keyword">
  		<button id="scrape-btn">Scrape Data</button>
	</div>
  
  <div id="results"></div>

  <script>
    const scrapeBtn = document.getElementById('scrape-btn');
    const resultsDiv = document.getElementById('results');
	
	
    scrapeBtn.addEventListener('click', async () => {
      // scrapeBtn.disabled = true;
      try {
		const keyword = document.getElementById('input').value;
		console.log(keyword)
		const response = await fetch('/scrape', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({keyword}),
      });
        const data = await response.json();
		data.imageSrc = new Image();
        const html = `
          <h2>Scraped Data:</h2>
          <ul>
            ${data.map(item => `<li> <img src="${item.imageSrc}" alt="scraped image"> Description:${item.name}, Currrent Price: <span> ${item.newPrice}</span></li>`).join('')}
          </ul>
        `;
        resultsDiv.innerHTML = html;
      } catch (error) {
        resultsDiv.innerHTML = `<p>Error: ${error.message}</p>`;
      }
    });
  </script>
</body>
</html>